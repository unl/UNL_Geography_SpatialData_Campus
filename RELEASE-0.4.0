Major refactoring:

* Rearrange source for running out of svn checkout
* Add driver based interface
